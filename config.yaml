# =============================================================================
# Mossland Agentic Orchestrator - Configuration
# =============================================================================

# Model Configuration
models:
  claude:
    # Primary model for development and planning tasks
    default: opus
    # Fallback if opus is unavailable
    fallback: sonnet

  openai:
    # Primary model for review/evaluation (matches ChatGPT web)
    default: gpt-5.2-chat-latest
    # Fallback model
    fallback: gpt-5.2
    # Pinned version for reproducibility (optional, set to null for latest)
    pinned: null

  gemini:
    # Primary model for fast agentic tasks
    default: gemini-3-flash-preview
    # Fallback models in order of preference
    fallback: gemini-3-pro-preview
    fallback_secondary: gemini-2.5-pro
    # Pinned version for reproducibility (optional)
    pinned: null

# Execution Limits
limits:
  # Maximum planning iterations before escalation/failure
  planning_max_iterations: 3

  # Maximum development iterations before escalation/failure
  dev_max_iterations: 5

  # Rate limit handling
  rate_limit:
    max_retries: 5
    max_wait_seconds: 3600
    initial_backoff_seconds: 10
    backoff_multiplier: 2

  # Loop mode limits
  loop:
    max_steps: 100
    delay_seconds: 10
    lock_timeout_seconds: 300

# Quality Thresholds
quality:
  # Minimum review score to pass (1-10 scale)
  required_review_score: 7.0

  # Minimum test coverage percentage
  min_test_coverage: 70

  # Required review approvals (from different models)
  min_review_approvals: 1

# Stage Configuration
stages:
  ideation:
    # Number of ideas to generate per run
    ideas_per_run: 3

  planning:
    # Documents to generate
    documents:
      - PRD.md
      - ARCHITECTURE.md
      - TASKS.md
      - ACCEPTANCE_CRITERIA.md

  dev:
    # Auto-commit on each file creation
    auto_commit: true

  qa:
    # Run linting
    run_lint: true
    # Run type checking
    run_typecheck: true
    # Run unit tests
    run_tests: true

# Git Configuration
git:
  # Auto-push after commits
  auto_push: false

  # Branch naming pattern
  branch_pattern: "project/{project_id}"

  # Commit message template
  commit_template: |
    [{stage}] {description}

    {details}

    Generated by: Agentic Orchestrator
    Stage: {stage}
    Project: {project_id}
    Iteration: planning={planning_iter}, dev={dev_iter}

# Logging
logging:
  level: INFO
  format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"
  file: logs/orchestrator.log
